import{r,j as e}from"./vendor-RJ-jBvc8.js";import{s as _}from"./index-DfMx629v.js";import{B as E}from"./button-D3CWm_we.js";import{I as i}from"./input-PBOW6J0D.js";import{u as q}from"./i18n-DvSS2Fqm.js";import{d as g,e as j}from"./icons-CewslWSu.js";import{u as F,L}from"./router-Db51iocS.js";import"./supabase-BfAM1BYj.js";function $(){const{t:s}=q(),b=F(),[d,a]=r.useState(!1),[h,l]=r.useState(null),[x,v]=r.useState(""),[f,w]=r.useState(""),[n,N]=r.useState(""),[p,y]=r.useState(""),[m,S]=r.useState(""),[c,k]=r.useState(!1),[u,C]=r.useState(!1),P=async t=>{if(t.preventDefault(),a(!0),l(null),n!==p){l(s("auth.register.password_mismatch")),a(!1);return}if(!m){l(s("auth.register.role_required")),a(!1);return}try{const{error:o}=await _.auth.signUp({email:f,password:n,options:{data:{full_name:x,role:m},emailRedirectTo:`${window.location.origin}/#/`}});if(o)throw o;b("/register-confirmation")}catch(o){l(o.message)}finally{a(!1)}};return e.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen p-4",children:e.jsxs("div",{className:"w-full max-w-md space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-3xl font-bold",children:s("auth.register.title")}),e.jsx("p",{className:"mt-2 text-neutral-400",children:s("auth.register.subtitle")})]}),e.jsxs("form",{onSubmit:P,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"fullName",className:"block text-sm font-medium mb-1",children:s("common.name")}),e.jsx(i,{id:"fullName",type:"text",value:x,onChange:t=>v(t.target.value),required:!0,placeholder:"Ex: João Silva"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium mb-1",children:s("common.email")}),e.jsx(i,{id:"email",type:"email",value:f,onChange:t=>w(t.target.value),required:!0,placeholder:"you@example.com"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"role",className:"block text-sm font-medium mb-1",children:s("auth.register.role_label")}),e.jsxs("select",{id:"role",value:m,onChange:t=>S(t.target.value),required:!0,className:"flex h-10 w-full rounded-md border border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-900 px-3 py-2 text-sm text-neutral-900 dark:text-neutral-50 ring-offset-white dark:ring-offset-neutral-950 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-500 focus-visible:ring-offset-2",children:[e.jsx("option",{value:"",children:s("auth.register.role_placeholder")}),e.jsx("option",{value:"aluno",children:s("auth.register.role_student")}),e.jsx("option",{value:"instrutor",children:s("auth.register.role_instructor")})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium mb-1",children:s("common.password")}),e.jsxs("div",{className:"relative",children:[e.jsx(i,{id:"password",type:c?"text":"password",value:n,onChange:t=>N(t.target.value),required:!0,minLength:6,placeholder:"••••••••",className:"pr-12"}),e.jsx("button",{type:"button",onClick:()=>k(!c),className:"absolute right-3 top-1/2 -translate-y-1/2 text-neutral-500 hover:text-neutral-400 focus:outline-none",children:c?e.jsx(g,{className:"h-5 w-5"}):e.jsx(j,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium mb-1",children:s("auth.register.confirm_password","Confirm Password")}),e.jsxs("div",{className:"relative",children:[e.jsx(i,{id:"confirmPassword",type:u?"text":"password",value:p,onChange:t=>y(t.target.value),required:!0,minLength:6,placeholder:"••••••••",className:"pr-12"}),e.jsx("button",{type:"button",onClick:()=>C(!u),className:"absolute right-3 top-1/2 -translate-y-1/2 text-neutral-500 hover:text-neutral-400 focus:outline-none",children:u?e.jsx(g,{className:"h-5 w-5"}):e.jsx(j,{className:"h-5 w-5"})})]})]})]}),h&&e.jsx("div",{className:"p-3 text-sm text-red-500 bg-red-500/10 rounded-md",children:h}),e.jsx(E,{type:"submit",className:"w-full",disabled:d,children:s(d?"common.loading":"auth.register.submit")})]}),e.jsxs("p",{className:"text-center text-sm text-neutral-400",children:[s("auth.register.has_account")," ",e.jsx(L,{to:"/login",className:"text-emerald-500 hover:text-emerald-400 font-medium",children:s("auth.login.title")})]})]})})}export{$ as default};
