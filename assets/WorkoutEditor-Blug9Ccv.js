import{r as s,j as e}from"./vendor-RJ-jBvc8.js";import{u as re,b as le,g as y,s as ne,c as _}from"./index-CeCAP8rO.js";import{B as o}from"./button-D7yof07s.js";import{I as l}from"./input-BTJ0DX5C.js";import{S as c}from"./skeleton-C6w1zwJw.js";import{u as de}from"./i18n-DvSS2Fqm.js";import{h as oe,X as ce,i as ie,G as xe,V as me,a as ue,b as he,c as pe}from"./icons-C8fbylrd.js";import{b as be,u as ge}from"./router-DrPDuPhB.js";import"./supabase-BfAM1BYj.js";function Se(){const{t:a}=de(),{workoutId:d}=be(),H=ge(),{activeWorkoutItems:u,fetchWorkoutItems:I,addWorkoutItem:J,updateWorkoutItem:K,deleteWorkoutItem:M}=re(),h=le(t=>t.user),[O,Q]=s.useState(""),[m,S]=s.useState(""),[p,C]=s.useState(""),[b,E]=s.useState(""),[g,U]=s.useState(""),[V,R]=s.useState(""),[i,W]=s.useState(""),[Y,z]=s.useState(!1),[Z,$]=s.useState(!0),[L,N]=s.useState(null),[P,A]=s.useState(""),[j,q]=s.useState(""),[v,B]=s.useState(""),[f,G]=s.useState(""),[T,D]=s.useState(""),[x,X]=s.useState(""),w=i.trim().length>0&&!y(i),k=x.trim().length>0&&!y(x);s.useEffect(()=>{d&&h&&Promise.all([I(d),ne.from("workouts").select("name").eq("id",d).eq("user_id",h.id).single()]).then(([t,{data:n}])=>{n&&Q(n.name),$(!1)})},[d,I,h]);const ee=async t=>{t.preventDefault(),!(!m||!d)&&(z(!0),await J(d,m,u.length,p||void 0,b?parseInt(b):void 0,g?parseInt(g):void 0,V,i.trim()?i.trim():void 0),S(""),C(""),E(""),U(""),R(""),W(""),z(!1))},te=t=>{var n,r,F;N(t.id),A(t.title),q(((n=t.default_reps)==null?void 0:n.toString())||""),B(((r=t.default_sets)==null?void 0:r.toString())||""),G(((F=t.rest_seconds)==null?void 0:F.toString())||""),D(t.notes||""),X(t.video_url||"")},ae=()=>{N(null)},se=async t=>{await K(t,{title:P,default_reps:j||void 0,default_sets:v?parseInt(v):void 0,rest_seconds:f?parseInt(f):void 0,notes:T,video_url:x.trim()?x.trim():void 0}),N(null)};return e.jsxs("div",{className:"min-h-screen bg-white dark:bg-neutral-950 text-neutral-900 dark:text-white pb-20 transition-colors",children:[e.jsxs("header",{className:"p-4 flex items-center gap-4 border-b border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-950 sticky top-0 z-10 transition-colors",children:[e.jsx(o,{variant:"ghost",size:"icon",onClick:()=>H("/"),className:"text-neutral-500 dark:text-neutral-400",children:e.jsx(oe,{className:"h-5 w-5"})}),e.jsx("h1",{className:"font-bold text-lg",children:a("editor.title",{name:O})})]}),Z?e.jsxs("main",{className:"p-4 space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{className:"h-4 w-24"}),e.jsx("div",{className:"space-y-2",children:[1,2,3,4].map(t=>e.jsxs("div",{className:"flex items-center gap-3 bg-neutral-50 dark:bg-neutral-900 p-3 rounded-lg border border-neutral-200 dark:border-neutral-800",children:[e.jsx(c,{className:"h-5 w-5 rounded"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(c,{className:"h-5 w-32"}),e.jsx(c,{className:"h-3 w-40"})]}),e.jsx(c,{className:"h-8 w-8 rounded-full"})]},t))})]}),e.jsx(c,{className:"h-32 w-full rounded-xl"})]}):e.jsxs("main",{className:"p-4 space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-sm font-bold text-neutral-400 dark:text-neutral-500 uppercase tracking-wider px-1",children:a("editor.exercises")}),e.jsxs("div",{className:"space-y-2",children:[u.map(t=>{const n=y(t.video_url);return e.jsx("div",{className:_("bg-neutral-50 dark:bg-neutral-900 rounded-lg border transition-all",L===t.id?"p-4 border-emerald-500/50 ring-1 ring-emerald-500/20 shadow-lg shadow-emerald-500/5":"p-3 border-neutral-200 dark:border-neutral-800"),children:L===t.id?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[2fr_1fr_1fr_1fr] gap-4",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] uppercase font-bold text-neutral-500 px-1",children:a("common.name")}),e.jsx(l,{value:P,onChange:r=>A(r.target.value),className:"bg-white dark:bg-neutral-950 border-neutral-200 dark:border-neutral-800 text-neutral-900 dark:text-white"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] uppercase font-bold text-neutral-500 px-1",children:a("common.sets")}),e.jsx(l,{type:"text",value:v,onChange:r=>B(r.target.value),className:"bg-white dark:bg-neutral-950 border-neutral-200 dark:border-neutral-800 text-neutral-900 dark:text-white"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] uppercase font-bold text-neutral-500 px-1",children:a("common.reps")}),e.jsx(l,{type:"text",value:j,onChange:r=>q(r.target.value),className:"bg-white dark:bg-neutral-950 border-neutral-200 dark:border-neutral-800 text-neutral-900 dark:text-white"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] uppercase font-bold text-neutral-500 px-1",children:a("common.rest_seconds")}),e.jsx(l,{type:"number",value:f,onChange:r=>G(r.target.value),className:"bg-white dark:bg-neutral-950 border-neutral-200 dark:border-neutral-800 text-neutral-900 dark:text-white"})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] uppercase font-bold text-neutral-500 px-1",children:a("common.notes")}),e.jsx(l,{value:T,onChange:r=>D(r.target.value),className:"bg-white dark:bg-neutral-950 border-neutral-200 dark:border-neutral-800 text-neutral-900 dark:text-white"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] uppercase font-bold text-neutral-500 px-1",children:a("common.video_url")}),e.jsx(l,{value:x,onChange:r=>X(r.target.value),placeholder:"https://...",className:_("bg-white dark:bg-neutral-950 border-neutral-200 dark:border-neutral-800 text-neutral-900 dark:text-white",k&&"border-red-500")}),k&&e.jsx("p",{className:"text-xs text-red-500 px-1",children:a("common.video_url_invalid","Use http:// or https://")})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs(o,{size:"sm",variant:"ghost",onClick:ae,className:"text-neutral-400",children:[e.jsx(ce,{className:"h-4 w-4 mr-1"})," ",a("common.cancel")]}),e.jsxs(o,{size:"sm",onClick:()=>se(t.id),disabled:k,className:"bg-emerald-600 hover:bg-emerald-700 text-white",children:[e.jsx(ie,{className:"h-4 w-4 mr-1"})," ",a("common.save")]})]})]}):e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(xe,{className:"h-5 w-5 text-neutral-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-medium block",children:t.title}),e.jsxs("div",{className:"flex items-center gap-2",children:[t.default_sets&&e.jsxs("span",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:[t.default_sets," ",a("common.sets").toLowerCase()]}),t.default_reps&&e.jsxs("span",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:[t.default_reps," ",a("common.reps").toLowerCase()]}),t.rest_seconds!=null&&e.jsxs("span",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:[a("common.rest").toLowerCase(),": ",t.rest_seconds,"s"]}),t.notes&&e.jsxs("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 bg-neutral-100 dark:bg-neutral-800 px-1.5 py-0.5 rounded italic",children:[a("common.notes"),": ",t.notes]}),n&&e.jsx("a",{href:n,target:"_blank",rel:"noreferrer",title:a("common.video_url"),className:"inline-flex items-center justify-center h-6 w-6 rounded-full text-emerald-600 hover:text-emerald-700 hover:bg-emerald-500/10",children:e.jsx(me,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(o,{size:"icon",variant:"ghost",className:"text-neutral-400 hover:text-neutral-900 dark:hover:text-white hover:bg-neutral-100 dark:hover:bg-neutral-800 h-8 w-8",onClick:()=>te(t),children:e.jsx(ue,{className:"h-4 w-4"})}),e.jsx(o,{size:"icon",variant:"ghost",className:"text-red-500 hover:text-red-400 hover:bg-red-950/30 h-8 w-8",onClick:()=>M(t.id),children:e.jsx(he,{className:"h-4 w-4"})})]})]})},t.id)}),u.length===0&&e.jsx("p",{className:"text-center text-neutral-500 py-8 italic",children:"No exercises yet."})]})]}),e.jsx("div",{className:"bg-neutral-50 dark:bg-neutral-900/50 p-4 rounded-xl border border-neutral-200 dark:border-neutral-800 shadow-sm",children:e.jsxs("form",{onSubmit:ee,className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-bold uppercase tracking-wider text-emerald-500 px-1",children:a("editor.add_exercise")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[2fr_1fr_1fr_1fr_2fr_2fr_auto] gap-4 items-end",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] uppercase font-bold text-neutral-500 px-1",children:a("common.name")}),e.jsx(l,{placeholder:a("common.name"),value:m,onChange:t=>S(t.target.value),className:"bg-white dark:bg-neutral-950 border-neutral-200 dark:border-neutral-800 text-neutral-900 dark:text-white h-12 md:h-10 text-base md:text-sm"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] uppercase font-bold text-neutral-500 px-1",children:a("common.sets")}),e.jsx(l,{placeholder:"3",type:"number",value:b,onChange:t=>E(t.target.value),className:"bg-white dark:bg-neutral-950 border-neutral-200 dark:border-neutral-800 text-neutral-900 dark:text-white h-12 md:h-10 text-base md:text-sm"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] uppercase font-bold text-neutral-500 px-1",children:a("common.reps")}),e.jsx(l,{placeholder:"12 ou 15/14/13/12",type:"text",value:p,onChange:t=>C(t.target.value),className:"bg-white dark:bg-neutral-950 border-neutral-200 dark:border-neutral-800 text-neutral-900 dark:text-white h-12 md:h-10 text-base md:text-sm"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] uppercase font-bold text-neutral-500 px-1",children:a("common.rest_seconds")}),e.jsx(l,{placeholder:"60",type:"number",value:g,onChange:t=>U(t.target.value),className:"bg-white dark:bg-neutral-950 border-neutral-200 dark:border-neutral-800 text-neutral-900 dark:text-white h-12 md:h-10 text-base md:text-sm"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] uppercase font-bold text-neutral-500 px-1",children:a("common.notes")}),e.jsx(l,{placeholder:a("common.notes"),value:V,onChange:t=>R(t.target.value),className:"bg-white dark:bg-neutral-950 border-neutral-200 dark:border-neutral-800 text-neutral-900 dark:text-white h-12 md:h-10 text-base md:text-sm"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] uppercase font-bold text-neutral-500 px-1",children:a("common.video_url")}),e.jsx(l,{placeholder:"https://...",value:i,onChange:t=>W(t.target.value),className:_("bg-white dark:bg-neutral-950 border-neutral-200 dark:border-neutral-800 text-neutral-900 dark:text-white h-12 md:h-10 text-base md:text-sm",w&&"border-red-500")}),w&&e.jsx("p",{className:"text-xs text-red-500 px-1",children:a("common.video_url_invalid","Use http:// or https://")})]}),e.jsx("div",{className:"flex flex-col justify-end",children:e.jsxs(o,{type:"submit",size:"lg",disabled:Y||!m||w,className:"bg-emerald-600 hover:bg-emerald-700 text-white h-12 md:h-10 px-6 shadow-lg shadow-emerald-950/20 w-full md:w-auto",children:[e.jsx(pe,{className:"h-5 w-5 md:h-4 md:w-4 mr-2"})," ",a("common.add")]})})]})]})})]})]})}export{Se as default};
