import{r as t,j as e}from"./vendor-RJ-jBvc8.js";import{s as b}from"./index-CJN2Yibc.js";import{B as v}from"./button-eI2RqdAi.js";import{I as u}from"./input-BQh-um8q.js";import{u as g}from"./i18n-DvSS2Fqm.js";import{k as y,d as P,e as _}from"./icons-CewslWSu.js";import{u as S}from"./router-Db51iocS.js";import"./supabase-BfAM1BYj.js";function T(){const{t:s}=g(),x=S(),[d,c]=t.useState(!1),[i,l]=t.useState(null),[h,p]=t.useState(!1),[n,f]=t.useState(""),[m,w]=t.useState(""),[r,j]=t.useState(!1),N=async a=>{if(a.preventDefault(),n!==m){l(s("auth.register.password_mismatch")||"Passwords do not match");return}c(!0),l(null);try{const{error:o}=await b.auth.updateUser({password:n});if(o)throw o;p(!0),setTimeout(()=>{x("/login")},3e3)}catch(o){l(o.message||s("auth.reset_password.error"))}finally{c(!1)}};return e.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen p-4",children:e.jsxs("div",{className:"w-full max-w-md space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-3xl font-bold",children:s("auth.reset_password.title")}),e.jsx("p",{className:"mt-2 text-neutral-400",children:s("auth.reset_password.subtitle")})]}),h?e.jsxs("div",{className:"p-6 bg-emerald-500/10 border border-emerald-500/20 rounded-2xl text-center space-y-4 animate-in fade-in zoom-in duration-300",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx(y,{className:"h-12 w-12 text-emerald-500"})}),e.jsx("p",{className:"text-emerald-500 font-medium",children:s("auth.reset_password.success")}),e.jsx("p",{className:"text-sm text-neutral-400",children:"Redirecionando para o login..."})]}):e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium mb-1",children:s("auth.reset_password.new_password")}),e.jsxs("div",{className:"relative",children:[e.jsx(u,{id:"password",type:r?"text":"password",value:n,onChange:a=>f(a.target.value),required:!0,placeholder:"••••••••",className:"pr-12"}),e.jsx("button",{type:"button",onClick:()=>j(!r),className:"absolute right-3 top-1/2 -translate-y-1/2 text-neutral-500 hover:text-neutral-400 focus:outline-none",children:r?e.jsx(P,{className:"h-5 w-5"}):e.jsx(_,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium mb-1",children:s("auth.reset_password.confirm_password")}),e.jsx(u,{id:"confirmPassword",type:r?"text":"password",value:m,onChange:a=>w(a.target.value),required:!0,placeholder:"••••••••"})]})]}),i&&e.jsx("div",{className:"p-3 text-sm text-red-500 bg-red-500/10 rounded-md",children:i}),e.jsx(v,{type:"submit",className:"w-full",disabled:d,children:s(d?"common.loading":"auth.reset_password.submit")})]})]})})}export{T as default};
