import{r,j as e}from"./vendor-D7ki0F_6.js";import{u as $,s as ee,c as te}from"./index-CG5lnoVs.js";import{B as d}from"./button-o7loT5aq.js";import{I as l}from"./input-BlcyNeZr.js";import{S as o}from"./skeleton-DnvUEloq.js";import{u as ae}from"./i18n-Bm7ldLcC.js";import{h as se,X as re,i as le,G as ne,V as de,a as oe,b as ce,c as ie}from"./icons-DXq1rHtP.js";import{b as xe,u as me}from"./router-DsEtcPPD.js";import"./supabase-DVQvS8qL.js";function we(){const{t:a}=ae(),{workoutId:n}=xe(),T=me(),{activeWorkoutItems:i,fetchWorkoutItems:v,addWorkoutItem:q,updateWorkoutItem:D,deleteWorkoutItem:X}=$(),[F,H]=r.useState(""),[c,k]=r.useState(""),[x,w]=r.useState(""),[m,f]=r.useState(""),[u,y]=r.useState(""),[_,I]=r.useState(""),[h,S]=r.useState(""),[J,C]=r.useState(!1),[K,M]=r.useState(!0),[E,p]=r.useState(null),[R,W]=r.useState(""),[b,z]=r.useState(""),[g,V]=r.useState(""),[N,L]=r.useState(""),[U,P]=r.useState(""),[j,A]=r.useState("");r.useEffect(()=>{n&&Promise.all([v(n),ee.from("workouts").select("name").eq("id",n).single()]).then(([t,{data:s}])=>{s&&H(s.name),M(!1)})},[n,v]);const O=async t=>{t.preventDefault(),!(!c||!n)&&(C(!0),await q(n,c,i.length,x||void 0,m?parseInt(m):void 0,u?parseInt(u):void 0,_,h.trim()?h.trim():void 0),k(""),w(""),f(""),y(""),I(""),S(""),C(!1))},Q=t=>{var s,B,G;p(t.id),W(t.title),z(((s=t.default_reps)==null?void 0:s.toString())||""),V(((B=t.default_sets)==null?void 0:B.toString())||""),L(((G=t.rest_seconds)==null?void 0:G.toString())||""),P(t.notes||""),A(t.video_url||"")},Y=()=>{p(null)},Z=async t=>{await D(t,{title:R,default_reps:b||void 0,default_sets:g?parseInt(g):void 0,rest_seconds:N?parseInt(N):void 0,notes:U,video_url:j.trim()?j.trim():void 0}),p(null)};return e.jsxs("div",{className:"min-h-screen bg-white dark:bg-neutral-950 text-neutral-900 dark:text-white pb-20 transition-colors",children:[e.jsxs("header",{className:"p-4 flex items-center gap-4 border-b border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-950 sticky top-0 z-10 transition-colors",children:[e.jsx(d,{variant:"ghost",size:"icon",onClick:()=>T("/"),className:"text-neutral-500 dark:text-neutral-400",children:e.jsx(se,{className:"h-5 w-5"})}),e.jsx("h1",{className:"font-bold text-lg",children:a("editor.title",{name:F})})]}),K?e.jsxs("main",{className:"p-4 space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{className:"h-4 w-24"}),e.jsx("div",{className:"space-y-2",children:[1,2,3,4].map(t=>e.jsxs("div",{className:"flex items-center gap-3 bg-neutral-50 dark:bg-neutral-900 p-3 rounded-lg border border-neutral-200 dark:border-neutral-800",children:[e.jsx(o,{className:"h-5 w-5 rounded"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(o,{className:"h-5 w-32"}),e.jsx(o,{className:"h-3 w-40"})]}),e.jsx(o,{className:"h-8 w-8 rounded-full"})]},t))})]}),e.jsx(o,{className:"h-32 w-full rounded-xl"})]}):e.jsxs("main",{className:"p-4 space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-sm font-bold text-neutral-400 dark:text-neutral-500 uppercase tracking-wider px-1",children:a("editor.exercises")}),e.jsxs("div",{className:"space-y-2",children:[i.map(t=>e.jsx("div",{className:te("bg-neutral-50 dark:bg-neutral-900 rounded-lg border transition-all",E===t.id?"p-4 border-emerald-500/50 ring-1 ring-emerald-500/20 shadow-lg shadow-emerald-500/5":"p-3 border-neutral-200 dark:border-neutral-800"),children:E===t.id?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[2fr_1fr_1fr_1fr] gap-4",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] uppercase font-bold text-neutral-500 px-1",children:a("common.name")}),e.jsx(l,{value:R,onChange:s=>W(s.target.value),className:"bg-white dark:bg-neutral-950 border-neutral-200 dark:border-neutral-800 text-neutral-900 dark:text-white"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] uppercase font-bold text-neutral-500 px-1",children:a("common.sets")}),e.jsx(l,{type:"text",value:g,onChange:s=>V(s.target.value),className:"bg-white dark:bg-neutral-950 border-neutral-200 dark:border-neutral-800 text-neutral-900 dark:text-white"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] uppercase font-bold text-neutral-500 px-1",children:a("common.reps")}),e.jsx(l,{type:"text",value:b,onChange:s=>z(s.target.value),className:"bg-white dark:bg-neutral-950 border-neutral-200 dark:border-neutral-800 text-neutral-900 dark:text-white"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] uppercase font-bold text-neutral-500 px-1",children:a("common.rest_seconds")}),e.jsx(l,{type:"number",value:N,onChange:s=>L(s.target.value),className:"bg-white dark:bg-neutral-950 border-neutral-200 dark:border-neutral-800 text-neutral-900 dark:text-white"})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] uppercase font-bold text-neutral-500 px-1",children:a("common.notes")}),e.jsx(l,{value:U,onChange:s=>P(s.target.value),className:"bg-white dark:bg-neutral-950 border-neutral-200 dark:border-neutral-800 text-neutral-900 dark:text-white"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] uppercase font-bold text-neutral-500 px-1",children:a("common.video_url")}),e.jsx(l,{value:j,onChange:s=>A(s.target.value),placeholder:"https://...",className:"bg-white dark:bg-neutral-950 border-neutral-200 dark:border-neutral-800 text-neutral-900 dark:text-white"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs(d,{size:"sm",variant:"ghost",onClick:Y,className:"text-neutral-400",children:[e.jsx(re,{className:"h-4 w-4 mr-1"})," ",a("common.cancel")]}),e.jsxs(d,{size:"sm",onClick:()=>Z(t.id),className:"bg-emerald-600 hover:bg-emerald-700 text-white",children:[e.jsx(le,{className:"h-4 w-4 mr-1"})," ",a("common.save")]})]})]}):e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ne,{className:"h-5 w-5 text-neutral-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-medium block",children:t.title}),e.jsxs("div",{className:"flex items-center gap-2",children:[t.default_sets&&e.jsxs("span",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:[t.default_sets," ",a("common.sets").toLowerCase()]}),t.default_reps&&e.jsxs("span",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:[t.default_reps," ",a("common.reps").toLowerCase()]}),t.rest_seconds!=null&&e.jsxs("span",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:[a("common.rest").toLowerCase(),": ",t.rest_seconds,"s"]}),t.notes&&e.jsxs("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 bg-neutral-100 dark:bg-neutral-800 px-1.5 py-0.5 rounded italic",children:[a("common.notes"),": ",t.notes]}),t.video_url&&e.jsx("a",{href:t.video_url,target:"_blank",rel:"noreferrer",title:a("common.video_url"),className:"inline-flex items-center justify-center h-6 w-6 rounded-full text-emerald-600 hover:text-emerald-700 hover:bg-emerald-500/10",children:e.jsx(de,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(d,{size:"icon",variant:"ghost",className:"text-neutral-400 hover:text-neutral-900 dark:hover:text-white hover:bg-neutral-100 dark:hover:bg-neutral-800 h-8 w-8",onClick:()=>Q(t),children:e.jsx(oe,{className:"h-4 w-4"})}),e.jsx(d,{size:"icon",variant:"ghost",className:"text-red-500 hover:text-red-400 hover:bg-red-950/30 h-8 w-8",onClick:()=>X(t.id),children:e.jsx(ce,{className:"h-4 w-4"})})]})]})},t.id)),i.length===0&&e.jsx("p",{className:"text-center text-neutral-500 py-8 italic",children:"No exercises yet."})]})]}),e.jsx("div",{className:"bg-neutral-50 dark:bg-neutral-900/50 p-4 rounded-xl border border-neutral-200 dark:border-neutral-800 shadow-sm",children:e.jsxs("form",{onSubmit:O,className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-bold uppercase tracking-wider text-emerald-500 px-1",children:a("editor.add_exercise")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[2fr_1fr_1fr_1fr_2fr_2fr_auto] gap-4 items-end",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] uppercase font-bold text-neutral-500 px-1",children:a("common.name")}),e.jsx(l,{placeholder:a("common.name"),value:c,onChange:t=>k(t.target.value),className:"bg-white dark:bg-neutral-950 border-neutral-200 dark:border-neutral-800 text-neutral-900 dark:text-white h-12 md:h-10 text-base md:text-sm"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] uppercase font-bold text-neutral-500 px-1",children:a("common.sets")}),e.jsx(l,{placeholder:"3",type:"number",value:m,onChange:t=>f(t.target.value),className:"bg-white dark:bg-neutral-950 border-neutral-200 dark:border-neutral-800 text-neutral-900 dark:text-white h-12 md:h-10 text-base md:text-sm"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] uppercase font-bold text-neutral-500 px-1",children:a("common.reps")}),e.jsx(l,{placeholder:"12 ou 15/14/13/12",type:"text",value:x,onChange:t=>w(t.target.value),className:"bg-white dark:bg-neutral-950 border-neutral-200 dark:border-neutral-800 text-neutral-900 dark:text-white h-12 md:h-10 text-base md:text-sm"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] uppercase font-bold text-neutral-500 px-1",children:a("common.rest_seconds")}),e.jsx(l,{placeholder:"60",type:"number",value:u,onChange:t=>y(t.target.value),className:"bg-white dark:bg-neutral-950 border-neutral-200 dark:border-neutral-800 text-neutral-900 dark:text-white h-12 md:h-10 text-base md:text-sm"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] uppercase font-bold text-neutral-500 px-1",children:a("common.notes")}),e.jsx(l,{placeholder:a("common.notes"),value:_,onChange:t=>I(t.target.value),className:"bg-white dark:bg-neutral-950 border-neutral-200 dark:border-neutral-800 text-neutral-900 dark:text-white h-12 md:h-10 text-base md:text-sm"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] uppercase font-bold text-neutral-500 px-1",children:a("common.video_url")}),e.jsx(l,{placeholder:"https://...",value:h,onChange:t=>S(t.target.value),className:"bg-white dark:bg-neutral-950 border-neutral-200 dark:border-neutral-800 text-neutral-900 dark:text-white h-12 md:h-10 text-base md:text-sm"})]}),e.jsx("div",{className:"flex flex-col justify-end",children:e.jsxs(d,{type:"submit",size:"lg",disabled:J||!c,className:"bg-emerald-600 hover:bg-emerald-700 text-white h-12 md:h-10 px-6 shadow-lg shadow-emerald-950/20 w-full md:w-auto",children:[e.jsx(ie,{className:"h-5 w-5 md:h-4 md:w-4 mr-2"})," ",a("common.add")]})})]})]})})]})]})}export{we as default};
