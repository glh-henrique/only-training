import{r as a,j as e}from"./vendor-RJ-jBvc8.js";import{u as g,s as N}from"./index-BtMhk_v_.js";import{B as u}from"./button-Chb2YNXO.js";import{A as x}from"./alert-modal-DtLzvl-u.js";import{S as n}from"./skeleton-BBbjaioL.js";import{u as y}from"./i18n-DvSS2Fqm.js";import{h as O,I as _,R as A,b as C}from"./icons-C8fbylrd.js";import{u as S}from"./router-DrPDuPhB.js";import"./supabase-BfAM1BYj.js";function B(){const{t}=y(),p=S(),{unarchiveWorkout:f,deleteWorkout:v}=g(),[m,o]=a.useState([]),[b,h]=a.useState(!0),[l,c]=a.useState({isOpen:!1,id:null}),[i,d]=a.useState({isOpen:!1,id:null}),j=async()=>{h(!0);try{const{data:s,error:r}=await N.from("workouts").select("*").eq("is_archived",!0).order("updated_at",{ascending:!1});if(r)throw r;o(s)}catch(s){console.error(s)}finally{h(!1)}};a.useEffect(()=>{j()},[]);const w=async()=>{l.id&&(await f(l.id),o(s=>s.filter(r=>r.id!==l.id)),c({isOpen:!1,id:null}))},k=async()=>{i.id&&(await v(i.id),o(s=>s.filter(r=>r.id!==i.id)),d({isOpen:!1,id:null}))};return e.jsxs("div",{className:"min-h-screen bg-white dark:bg-neutral-950 text-neutral-900 dark:text-white pb-20",children:[e.jsxs("header",{className:"p-4 flex items-center gap-4 sticky top-0 bg-white/80 dark:bg-neutral-950/80 backdrop-blur-md z-10 border-b border-neutral-200 dark:border-neutral-800",children:[e.jsx(u,{variant:"ghost",size:"icon",onClick:()=>p("/profile"),children:e.jsx(O,{className:"h-5 w-5"})}),e.jsx("h1",{className:"text-xl font-bold",children:t("workouts.archived","Archive")})]}),e.jsx("main",{className:"p-4 space-y-6 max-w-lg mx-auto",children:e.jsx("div",{className:"flex flex-col gap-4",children:b?e.jsx("div",{className:"space-y-3",children:[1,2,3].map(s=>e.jsxs("div",{className:"bg-neutral-50 dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 rounded-2xl p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{className:"h-5 w-32"}),e.jsx(n,{className:"h-3 w-20"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{className:"h-9 w-9 rounded-full"}),e.jsx(n,{className:"h-9 w-9 rounded-full"})]})]},s))}):m.length===0?e.jsxs("div",{className:"text-center py-20 flex flex-col items-center gap-4",children:[e.jsx("div",{className:"h-16 w-16 bg-neutral-100 dark:bg-neutral-900 rounded-full flex items-center justify-center text-neutral-400",children:e.jsx(_,{className:"h-8 w-8"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-lg",children:t("workouts.archive_empty_title","Archive Empty")}),e.jsx("p",{className:"text-sm text-neutral-500",children:t("workouts.archive_empty_desc","Your archived workouts will appear here.")})]})]}):m.map(s=>e.jsxs("div",{className:"bg-neutral-50 dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 rounded-2xl p-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-neutral-900 dark:text-white",children:s.name}),e.jsx("p",{className:"text-xs text-neutral-500 mt-0.5",children:s.focus})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(u,{variant:"ghost",size:"icon",className:"h-9 w-9 text-emerald-500 hover:bg-emerald-500/10",onClick:()=>c({isOpen:!0,id:s.id}),title:t("common.restore","Restore"),children:e.jsx(A,{className:"h-4 w-4"})}),e.jsx(u,{variant:"ghost",size:"icon",className:"h-9 w-9 text-red-500 hover:bg-red-500/10",onClick:()=>d({isOpen:!0,id:s.id}),title:t("common.delete","Delete"),children:e.jsx(C,{className:"h-4 w-4"})})]})]},s.id))})}),e.jsx(x,{isOpen:l.isOpen,onClose:()=>c({isOpen:!1,id:null}),onConfirm:w,variant:"info",title:t("workouts.unarchive_title","Unarchive Workout?"),description:t("workouts.unarchive_desc","This workout will appear back in your main list on Home. Do you want to continue?"),confirmLabel:t("common.restore","Unarchive")}),e.jsx(x,{isOpen:i.isOpen,onClose:()=>d({isOpen:!1,id:null}),onConfirm:k,variant:"danger",title:t("workouts.delete_title","Delete Workout?"),description:t("workouts.delete_desc","This action will remove the workout and all its history permanently. This cannot be undone."),confirmLabel:t("common.delete","Delete")})]})}export{B as default};
