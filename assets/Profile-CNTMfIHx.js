import{r as n,j as e}from"./vendor-RJ-jBvc8.js";import{b as O,d as R,u as E,c as N,s as L}from"./index-Bu10ICyF.js";import{B as c}from"./button-LRF_0VQ8.js";import{A as T}from"./alert-modal-BQzTyxT1.js";import{u as W}from"./i18n-DvSS2Fqm.js";import{h as M,M as P,l as w,m as z,A as $,K as B,n as K,o as F,p as G,L as I}from"./icons-C8fbylrd.js";import{u as U}from"./router-DrPDuPhB.js";import"./supabase-BfAM1BYj.js";function Z(){var f,p,b,j,g;const{t:s,i18n:a}=W(),i=U(),{user:t,signOut:v}=O(),{theme:o,toggleTheme:k}=R(),{archivedCount:y,fetchWorkouts:x}=E(),[m,_]=n.useState(!1),[u,h]=n.useState(!1);n.useEffect(()=>{x()},[x]);const[l,d]=n.useState({isOpen:!1,title:"",description:"",variant:"info"}),C=async()=>{await v(),i("/login")},S=async()=>{if(t!=null&&t.email){h(!0);try{const{error:r}=await L.auth.resetPasswordForEmail(t.email,{redirectTo:`${window.location.origin}/login`});if(r)throw r;d({isOpen:!0,variant:"success",title:s("profile.reset_email_sent_title"),description:s("profile.reset_email_sent_desc")}),_(!0)}catch(r){d({isOpen:!0,variant:"danger",title:s("profile.reset_error_title"),description:r.message})}finally{h(!1)}}},A=!!(t!=null&&t.email_confirmed_at);return e.jsxs("div",{className:"min-h-screen bg-white dark:bg-neutral-950 text-neutral-900 dark:text-white pb-20",children:[e.jsxs("header",{className:"p-4 flex items-center gap-4 sticky top-0 bg-white/80 dark:bg-neutral-950/80 backdrop-blur-md z-10 border-b border-neutral-200 dark:border-neutral-800",children:[e.jsx(c,{variant:"ghost",size:"icon",onClick:()=>i("/"),children:e.jsx(M,{className:"h-5 w-5"})}),e.jsx("h1",{className:"text-xl font-bold",children:s("profile.title")})]}),e.jsxs("main",{className:"p-4 space-y-8 max-w-lg mx-auto",children:[e.jsxs("section",{className:"flex flex-col items-center py-6 space-y-4",children:[e.jsx("div",{className:"h-24 w-24 bg-emerald-500 rounded-full flex items-center justify-center text-4xl font-bold text-white shadow-xl shadow-emerald-500/20",children:(((p=(f=t==null?void 0:t.user_metadata)==null?void 0:f.full_name)==null?void 0:p[0])||((b=t==null?void 0:t.email)==null?void 0:b[0])).toUpperCase()}),e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold",children:((j=t==null?void 0:t.user_metadata)==null?void 0:j.full_name)||((g=t==null?void 0:t.email)==null?void 0:g.split("@")[0])}),e.jsxs("p",{className:"text-neutral-500 dark:text-neutral-400 flex items-center justify-center gap-1.5 mt-1",children:[e.jsx(P,{className:"h-4 w-4"}),t==null?void 0:t.email]})]})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-bold text-neutral-400 dark:text-neutral-500 uppercase tracking-wider px-1",children:s("profile.account")}),e.jsxs("div",{className:"bg-neutral-50 dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 rounded-2xl overflow-hidden",children:[e.jsxs("div",{className:"p-4 flex items-center justify-between border-b border-neutral-200 dark:border-neutral-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 bg-blue-500/10 text-blue-500 rounded-xl flex items-center justify-center",children:e.jsx(w,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:s("profile.verification_status")}),e.jsx("p",{className:"text-xs text-neutral-500",children:s("profile.verification_desc")})]})]}),A?e.jsxs("span",{className:"flex items-center gap-1 text-xs font-bold text-emerald-500 bg-emerald-500/10 px-2.5 py-1 rounded-full",children:[e.jsx(w,{className:"h-3 w-3"}),s("profile.verified")]}):e.jsxs("span",{className:"flex items-center gap-1 text-xs font-bold text-amber-500 bg-amber-500/10 px-2.5 py-1 rounded-full",children:[e.jsx(z,{className:"h-3 w-3"}),s("profile.not_verified")]})]}),e.jsx("button",{onClick:()=>i("/archive"),className:"w-full p-4 flex items-center justify-between hover:bg-neutral-100 dark:hover:bg-white/5 transition-colors border-t border-neutral-200 dark:border-neutral-800 group",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 bg-amber-500/10 text-amber-500 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform",children:e.jsx($,{className:"h-5 w-5"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-semibold",children:s("workouts.archived","Archived Workouts")}),e.jsx("p",{className:"text-xs text-neutral-500",children:s("workouts.count",{count:y})})]})]})})]})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-bold text-neutral-400 dark:text-neutral-500 uppercase tracking-wider px-1",children:s("profile.security")}),e.jsx("div",{className:"bg-neutral-50 dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 rounded-2xl overflow-hidden p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 bg-amber-500/10 text-amber-500 rounded-xl flex items-center justify-center",children:e.jsx(B,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:s("profile.password_label")}),e.jsx("p",{className:"text-xs text-neutral-500",children:s("profile.password_desc")})]})]}),e.jsx(c,{variant:"outline",size:"sm",onClick:S,disabled:u||m,className:"text-xs",children:s(m?"profile.reset_password_sent":u?"common.loading":"profile.reset_password")})]})})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-bold text-neutral-400 dark:text-neutral-500 uppercase tracking-wider px-1",children:s("profile.system")}),e.jsxs("div",{className:"bg-neutral-50 dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 rounded-2xl overflow-hidden",children:[e.jsxs("button",{onClick:()=>k(),type:"button",className:"w-full p-4 flex items-center justify-between hover:bg-neutral-100 dark:hover:bg-white/5 transition-colors cursor-pointer group",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 bg-purple-500/10 text-purple-500 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform",children:o==="dark"?e.jsx(K,{className:"h-5 w-5 fill-current"}):e.jsx(F,{className:"h-5 w-5"})}),e.jsx("div",{className:"text-left",children:e.jsx("p",{className:"font-semibold text-neutral-900 dark:text-white",children:s("profile.theme")})})]}),e.jsx("div",{className:`h-6 w-11 rounded-full relative p-1 transition-colors ${o==="dark"?"bg-emerald-600":"bg-neutral-300"}`,children:e.jsx("div",{className:`h-4 w-4 bg-white rounded-full shadow-sm transform transition-transform duration-200 ${o==="dark"?"translate-x-5":"translate-x-0"}`})})]}),e.jsxs("div",{className:"p-4 flex items-center justify-between border-t border-neutral-200 dark:border-neutral-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 bg-emerald-500/10 text-emerald-500 rounded-xl flex items-center justify-center",children:e.jsx(G,{className:"h-5 w-5"})}),e.jsx("div",{children:e.jsx("p",{className:"font-semibold",children:s("profile.language")})})]}),e.jsxs("div",{className:"flex bg-neutral-100 dark:bg-neutral-800 p-1 rounded-lg border border-neutral-200 dark:border-neutral-700",children:[e.jsx("button",{onClick:()=>a.changeLanguage("en"),className:N("px-3 py-1 text-xs font-semibold rounded-md transition-all",a.language.startsWith("en")?"bg-white dark:bg-neutral-700 text-emerald-600 shadow-sm":"text-neutral-500 hover:text-neutral-700 dark:hover:text-neutral-300"),children:"EN"}),e.jsx("button",{onClick:()=>a.changeLanguage("pt"),className:N("px-3 py-1 text-xs font-semibold rounded-md transition-all",a.language.startsWith("pt")?"bg-white dark:bg-neutral-700 text-emerald-600 shadow-sm":"text-neutral-500 hover:text-neutral-700 dark:hover:text-neutral-300"),children:"PT"})]})]})]})]}),e.jsx("section",{className:"pt-4",children:e.jsxs(c,{variant:"ghost",className:"w-full py-6 text-red-500 hover:text-red-600 hover:bg-red-500/10 rounded-2xl flex items-center justify-center gap-2 font-bold",onClick:C,children:[e.jsx(I,{className:"h-5 w-5"}),s("common.logout")]})})]}),e.jsx(T,{isOpen:l.isOpen,onClose:()=>d(r=>({...r,isOpen:!1})),title:l.title,description:l.description,variant:l.variant})]})}export{Z as default};
